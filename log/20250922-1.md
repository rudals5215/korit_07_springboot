# Spring Boot ë°±ì—”ë“œ í™˜ê²½ ë° íˆ´ ì„¤ì •

## 1. IntelliJ & Gradle

### Gradleì´ë€?

* **ë¹Œë“œ ìë™í™” íˆ´**
  â†’ í”„ë¡œì íŠ¸ ì˜ì¡´ì„± ê´€ë¦¬ + ë¹Œë“œ/í…ŒìŠ¤íŠ¸/ë°°í¬ ìë™í™”
* Spring Bootì—ì„œëŠ” Maven ëŒ€ì‹  \*\*Gradle(Groovy DSL)\*\*ì„ ì£¼ë¡œ ì„ íƒ
* `build.gradle` íŒŒì¼ì—ì„œ ì˜ì¡´ì„±, í”ŒëŸ¬ê·¸ì¸, íƒœìŠ¤í¬ ë“±ì„ ì •ì˜

### build.gradle êµ¬ì„±

1. **plugins** : ì‚¬ìš© í”ŒëŸ¬ê·¸ì¸ ì •ì˜ (`java`, `spring-boot`, `lombok` ë“±)
2. **repositories** : ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê°€ì ¸ì˜¬ ì €ì¥ì†Œ ì§€ì • (`mavenCentral`)
3. **dependencies** : í”„ë¡œì íŠ¸ ì˜ì¡´ì„± ì •ì˜
4. **tasks** : ë¹Œë“œ/í…ŒìŠ¤íŠ¸/ë°°í¬ì™€ ê°™ì€ ì‘ì—… ì •ì˜

---

## 2. Spring Boot í”„ë¡œì íŠ¸ ìƒì„±

[Spring Initializr](https://start.spring.io) ì´ìš©

* **Dependencies**

  * Spring Web
  * Spring Boot DevTools
  * Lombok
  * Spring Data JPA

### ê¸°ë³¸ êµ¬ì¡°

```java
@SpringBootApplication
public class CardatabaseApplication {
	public static void main(String[] args) {
		SpringApplication.run(CardatabaseApplication.class, args);
	}
}
```

`@SpringBootApplication` = ì„¸ ê°€ì§€ ì• ë„ˆí…Œì´ì…˜ ì¡°í•©

1. `@EnableAutoConfiguration` â†’ ì˜ì¡´ì„± ê¸°ë°˜ ìë™ ì„¤ì •
2. `@ComponentScan` â†’ íŒ¨í‚¤ì§€ ë‚´ ì»´í¬ë„ŒíŠ¸ ê²€ìƒ‰
3. `@Configuration` â†’ Bean ì •ì˜

---

## 3. Spring Boot DevTools & Logging

* **DevTools** : ì½”ë“œ ìˆ˜ì • ì‹œ ìë™ ì¬ì‹œì‘
* **ë¡œê¹…** : Logback + SLF4J ê¸°ë³¸ ì œê³µ

```java
@SpringBootApplication
public class CardatabaseApplication {
	private static final Logger logger = LoggerFactory.getLogger(CardatabaseApplication.class);
	public static void main(String[] args) {
		SpringApplication.run(CardatabaseApplication.class, args);
		logger.info("Application Started !");
	}
}
```

### ë¡œê·¸ ë ˆë²¨

* TRACE / DEBUG / INFO / WARN / ERROR / FATAL / OFF
* `application.properties`ì—ì„œ ì¡°ì • ê°€ëŠ¥

```properties
logging.level.root=DEBUG
```

---

## 4. ì˜ì¡´ì„± ì£¼ì… (Dependency Injection)

### ì •ì˜

* ê°ì²´ ê°„ ì˜ì¡´ì„±ì„ **ì™¸ë¶€ì—ì„œ ì£¼ì…**í•˜ëŠ” ë°©ì‹
* ì½”ë“œ ê²°í•©ë„ë¥¼ ë‚®ì¶”ê³  í…ŒìŠ¤íŠ¸ ìš©ì´

### ì˜ì¡´ì„± ì£¼ì… ìœ í˜•

1. **ìƒì„±ì ì£¼ì… (ê¶Œì¥)**

   ```java
   public class Car {
       private final CarRepository carRepository;
       @Autowired
       public Car(CarRepository carRepository) {
           this.carRepository = carRepository;
       }
   }
   ```
2. **ì„¸í„° ì£¼ì… (ì„ íƒì  ì˜ì¡´ì„±ì— ì í•©)**

   ```java
   @Service
   public class AppUserService {
       private AppUserRepository userRepository;
       @Autowired
       public void setAppUserRepository(AppUserRepository userRepository) {
           this.userRepository = userRepository;
       }
   }
   ```
3. **í•„ë“œ ì£¼ì… (ê°„ë‹¨í•˜ì§€ë§Œ ê¶Œì¥ X)**

   ```java
   @Service
   public class CarController {
       @Autowired
       private CarDatabaseService carDatabaseService;
   }
   ```

---

## 5. JPAì™€ Entity

### ORM / JPA / Hibernate

* **ORM** : ê°ì²´ â†” ê´€ê³„í˜• DB ë§¤í•‘
* **JPA** : Java ORM í‘œì¤€ ìŠ¤í™
* **Hibernate** : JPAì˜ ëŒ€í‘œ êµ¬í˜„ì²´ (Spring Boot ê¸°ë³¸ ë‚´ì¥)

### Entity ì˜ˆì‹œ

```java
@Entity
public class Car {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    private String brand, model, color, registrationNumber;
    private int modelYear, price;
}
```

* `@Id` : Primary Key ì§€ì •
* `@GeneratedValue` : PK ìë™ ìƒì„±
* `@Column` : ì»¬ëŸ¼ëª…, ê¸¸ì´, null ì—¬ë¶€ ë“± ì„¤ì • ê°€ëŠ¥

---

## 6. H2 ì¸ë©”ëª¨ë¦¬ DB ì„¤ì •

### build.gradle

```gradle
dependencies {
	implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
	runtimeOnly 'com.h2database:h2'
}
```

### application.properties

```properties
spring.datasource.url=jdbc:h2:mem:testdb
spring.jpa.show-sql=true
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
```

â†’ ì‹¤í–‰ í›„ `http://localhost:8080/h2-console` ì ‘ì† ê°€ëŠ¥

---

## 7. Repositoryì™€ CRUD

### CarRepository

```java
public interface CarRepository extends CrudRepository<Car, Long> {
}
```

* CrudRepository ê¸°ë³¸ ë©”ì„œë“œ

  * `save()`, `findAll()`, `findById()`, `delete()` ë“±

### CommandLineRunnerë¡œ ë”ë¯¸ ë°ì´í„° ì‚½ì…

```java
@SpringBootApplication
public class CardatabaseApplication implements CommandLineRunner {
	private final CarRepository repository;

	public CardatabaseApplication(CarRepository repository) {
		this.repository = repository;
	}

	@Override
	public void run(String... args) {
		repository.save(new Car("Kia", "K5", "White", "11ê°€1234", 2024, 3000));
	}
}
```

---

## 8. Lombok ì ìš©

### build.gradle

```gradle
implementation 'org.projectlombok:lombok:1.18.42'
annotationProcessor 'org.projectlombok:lombok:1.18.42'
```

### Car.java

```java
@Entity
@Data
@NoArgsConstructor
@AllArgsConstructor
public class Car {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    private String brand, model, color, registrationNumber;
    private int modelYear, price;
}
```

â†’ `@Data` = `@Getter` + `@Setter` + `@ToString` + `@EqualsAndHashCode`

---

## 9. Repository Query Methods

Spring Data JPAëŠ” ë©”ì„œë“œ ì´ë¦„ë§Œìœ¼ë¡œ ìë™ ì¿¼ë¦¬ ìƒì„±

```java
public interface CarRepository extends JpaRepository<Car, Long> {
    List<Car> findByBrand(String brand);
    List<Car> findByColor(String color);
    List<Car> findByModelYear(int modelYear);
    List<Car> findByBrandAndModel(String brand, String model);
    List<Car> findByBrandOrColor(String brand, String color);
    List<Car> findByBrandOrderByModelYearAsc(String brand);
}
```

* `findByBrand("Kia")`
* `findByColor("White")`
* `findByModelYear(2024)`

### @Query ì§ì ‘ ì‚¬ìš©

```java
@Query("select c from Car c where c.brand like %?1")
List<Car> findByBrandEndsWith(String brand);

@Query("select c from Car c where c.brand like ?1%")
List<Car> findByBrandStartsWith(String brand);
```

---

## 10. Owner í…Œì´ë¸” (1\:N ê´€ê³„)

### Owner.java

```java
@Entity
@Getter
@Setter
@NoArgsConstructor
@RequiredArgsConstructor
public class Owner {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long ownerId;

    @NonNull
    private String firstName;
    @NonNull
    private String lastName;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "owner")
    private List<Car> cars;
}
```

### Car.java (ìˆ˜ì •)

```java
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "owner")
private Owner owner;
```

### OwnerRepository.java

```java
public interface OwnerRepository extends JpaRepository<Owner, Long> {
}
```

---

# ì •ë¦¬

* **Gradle** : í”„ë¡œì íŠ¸ ì˜ì¡´ì„± ê´€ë¦¬ & ë¹Œë“œ ìë™í™”
* **Spring Boot ê¸°ë³¸ êµ¬ì¡°** : `@SpringBootApplication`
* **DI(ì˜ì¡´ì„± ì£¼ì…)** : ìƒì„±ì ì£¼ì…ì´ ê¶Œì¥
* **JPA/Hibernate** : Entity â†” DB í…Œì´ë¸” ë§¤í•‘
* **H2 ì¸ë©”ëª¨ë¦¬ DB** : ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ìš© DB
* **Repository** : CRUD & ì¿¼ë¦¬ ë©”ì„œë“œ ì§€ì›
* **Entity ê´€ê³„** : Car â†” Owner (1\:N)

---

ğŸ‘‰ ì—¬ê¸°ê¹Œì§€ê°€ **Spring Boot ë°±ì—”ë“œ ê¸°ë³¸ê¸° + DB(JPA) ì„¤ì • + Repository í™œìš©**ì…ë‹ˆë‹¤.
ë‹¤ìŒ ë‹¨ê³„ëŠ” \*\*REST API + Spring Data REST + Swagger(OpenAPI3)\*\*ë¡œ í™•ì¥í•  ìˆ˜ ìˆê² ë„¤ìš”.

---

í˜¹ì‹œ ì´ ì •ë¦¬ë³¸ì„ ë¸”ë¡œê·¸ì— ì˜¬ë¦¬ì‹¤ ë•Œ, ì œê°€ ëª©ì°¨ë¥¼ **"í™˜ê²½ ì„¤ì • â†’ JPA â†’ Repository â†’ ê´€ê³„ ì„¤ì •"** ìˆœì„œë¡œ ë°°ì¹˜í–ˆëŠ”ë°, ì›í•˜ì‹œë©´ \*\*"DI ë¨¼ì € â†’ DB ì„¤ì • ë‚˜ì¤‘"\*\*ìœ¼ë¡œ ìˆœì„œë¥¼ ë°”ê¿”ë“œë¦´ê¹Œìš”?
