좋습니다 👍
오늘까지 진도 내용을 한눈에 보기 쉽게 정리하면서 **수업 계획**도 업데이트해드렸습니다.

---

# 📌 금일 수업 계획 (업데이트)

1. **MariaDB 설치 & HeidiSQL 조작**
2. **SQL 기초 복습**

   * SELECT / WHERE / ORDER BY
   * JOIN 기본 (INNER / LEFT / RIGHT / CROSS / FULL OUTER)
3. **JOIN 심화**

   * 다중 JOIN (3개 이상 테이블)
   * JOIN 결과 해석 (PK/FK 관계)
   * JOIN + GROUP BY (집계와 조합)
4. **UNION**

   * UNION vs UNION ALL
   * FULL OUTER JOIN 구현 원리 (LEFT + RIGHT → UNION)
5. **SubQuery (서브쿼리)**

   * SELECT 절 (스칼라 서브쿼리)
   * FROM 절 (인라인 뷰)
   * WHERE 절 (조건 필터링)
   * JOIN + SubQuery 혼합 사용
6. **실습 문제 풀이**

   * JOIN 응용
   * UNION 응용
   * SubQuery 응용

---

# 📖 오늘 수업 핵심 요약

## 1. JOIN 복습 & 확장

* **INNER JOIN** → 교집합
* **LEFT JOIN** → 기준(왼쪽) 테이블 데이터 모두 포함
* **RIGHT JOIN** → 오른쪽 테이블 데이터 모두 포함
* **FULL OUTER JOIN** = LEFT + RIGHT - INNER
* **CROSS JOIN** → 모든 경우의 수(카테시안 곱)

👉 **LEFT JOIN 권장** (RIGHT JOIN은 가독성 문제로 현업에서는 거의 안 씀)

```sql
SELECT u.id, u.username, o.id
FROM users u
LEFT JOIN orders o
ON u.id = o.user_id;
```

---

## 2. UNION

* **형식/컬럼 개수 동일해야 함**
* **UNION** → 중복 제거
* **UNION ALL** → 중복 포함

```sql
(SELECT id, phone, country FROM users WHERE country='Korea')
UNION ALL
(SELECT id, phone, country FROM users WHERE country='Mexico')
ORDER BY country;
```

👉 `FULL OUTER JOIN` = `(LEFT JOIN) UNION (RIGHT JOIN)`

---

## 3. SubQuery (서브쿼리)

### 1) SELECT 절 (스칼라 서브쿼리)

* **단일 값** 반환만 가능

```sql
SELECT name, price,
       (SELECT ROUND(AVG(price),2) FROM products) AS avgPrice
FROM products;
```

### 2) FROM 절 (인라인 뷰)

* 서브쿼리 결과를 **테이블처럼** 사용

```sql
SELECT * 
FROM (
  SELECT city, COUNT(id) AS userCnt
  FROM users
  GROUP BY city
) temp
WHERE userCnt > 2;
```

### 3) WHERE 절 (조건식 서브쿼리)

* 필터링 조건에 활용

```sql
SELECT * 
FROM products
WHERE discount_price = (SELECT MAX(discount_price) FROM products);
```

---

## 4. 연습 문제 예시

✅ JOIN

```sql
SELECT u.country, COUNT(o.id) AS orderCnt
FROM users u
LEFT JOIN orders o ON u.id = o.user_id
GROUP BY u.country
ORDER BY orderCnt DESC;
```

✅ UNION

```sql
(SELECT * FROM orders WHERE SUBSTR(order_date,1,7)='2015-10')
UNION ALL
(SELECT * FROM orders WHERE SUBSTR(order_date,1,7)='2015-12')
ORDER BY order_date DESC;
```

✅ SubQuery

```sql
SELECT * 
FROM users
WHERE id IN (
  SELECT user_id
  FROM orders
  WHERE order_date BETWEEN '2016-01-01' AND '2016-12-31'
);
```

---

# 📌 오늘의 핵심 포인트

* **JOIN = 좌우 결합 / UNION = 상하 결합**
* **집계 후 조건 필터링은 HAVING, 데이터 필터링은 WHERE**
* **서브쿼리는 SELECT / FROM / WHERE 어디든 들어갈 수 있다**

---

👉 이 정리본을 **블로그 포스팅용**으로 깔끔하게 다듬어드릴 수도 있고,
👉 아니면 **sql.md 학습 파일**로 만들어서 실습 문제 + 정답을 한눈에 정리할 수도 있는데, 어떤 쪽이 더 필요하세요?
